<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<TabPane fx:id="tabs"
         stylesheets="@../CSSFiles/Recipe.css"
         xmlns="http://javafx.com/javafx/24.0.1"
         xmlns:fx="http://javafx.com/fxml/1"
         fx:controller="Controllers.RecipeTabController">

    <tabs>
        <!-- ===================== DISCOVER (your existing UI) ===================== -->
        <Tab fx:id="tabDiscover" text="Discover" closable="false">
            <content>
                <ScrollPane fitToWidth="true">
                    <content>
                        <VBox spacing="24" styleClass="main-container">
                            <padding>
                                <Insets bottom="32" left="48" right="48" top="32" />
                            </padding>

                            <!-- HEADER -->
                            <HBox alignment="CENTER_LEFT">
                                <Button fx:id="backButton"
                                        onAction="#handleBackToPantry"
                                        styleClass="back-button"
                                        text="â† Back to Pantry" />
                            </HBox>

                            <VBox spacing="8" styleClass="header-section">
                                <Label styleClass="page-title"
                                       text="Recipe Recommendations" />
                                <Label styleClass="page-subtitle"
                                       text="AI-powered recipe suggestions based on your pantry" />
                            </VBox>

                            <!-- SEARCH -->
                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <TextField fx:id="searchField"
                                           promptText="Search recipes..."
                                           onKeyReleased="#handleSearch"
                                           prefWidth="300" />
                                <Button text="Search" onAction="#handleSearch" />
                            </HBox>

                            <!-- AI INPUT -->
                            <HBox alignment="CENTER_LEFT" spacing="12" styleClass="ai-input-container">
                                <padding><Insets bottom="12" left="12" right="12" top="12" /></padding>
                                <TextField fx:id="aiInputField"
                                           promptText="Ask AI for a recipe with... (e.g., 'something with chicken and rice')"
                                           styleClass="ai-input-field"
                                           HBox.hgrow="ALWAYS" />
                                <Button fx:id="generateButton"
                                        onAction="#handleGenerateRecipe"
                                        styleClass="generate-button"
                                        text="âœ¨ Generate" />
                            </HBox>

                            <!-- FILTERS -->
                            <HBox alignment="CENTER_LEFT" spacing="12" styleClass="filter-container">
                                <Button fx:id="allRecipesBtn" onAction="#handleFilterAll" styleClass="filter-button" text="All Recipes" />
                                <Button fx:id="readyBtn" onAction="#handleFilterReady" styleClass="filter-button" text="Readily Available" />
                                <Button fx:id="favoriteBtn" onAction="#handleFilterFavorites" styleClass="filter-button" text="Favorites" />
                                <Button fx:id="notReadyBtn" onAction="#handleFilterNotReady" styleClass="filter-button" text="Not Ready" />
                                <Button fx:id="aiRecommendedBtn" onAction="#handleFilterAIRecommended" styleClass="filter-button" text="AI Recommended" />
                                <Region HBox.hgrow="ALWAYS" />
                                <Button fx:id="addRecipeBtn" onAction="#handleAddRecipe" styleClass="add-recipe-button" text="+ Add Recipe" />
                            </HBox>

                            <!-- DISCOVER CARDS -->
                            <VBox fx:id="vBox" spacing="20" styleClass="recipes-container" />

                            <!-- BOTTOM BUTTONS -->
                            <HBox alignment="CENTER" spacing="16" styleClass="bottom-buttons">
                                <padding><Insets top="20" /></padding>
                                <Button fx:id="generateAgainBtn" onAction="#handleGenerateAgain" styleClass="secondary-button" text="ðŸ”„ Generate Again" />
                                <Button fx:id="seeMoreBtn" onAction="#handleSeeMore" styleClass="primary-button" text="See More Recipes" />
                            </HBox>
                        </VBox>
                    </content>
                </ScrollPane>
            </content>
        </Tab>

        <!-- ===================== SAVED (new tab) ===================== -->
        <Tab fx:id="tabSaved" text="Saved" closable="false">
            <content>
                <ScrollPane fitToWidth="true">
                    <content>
                        <VBox spacing="24" styleClass="main-container">
                            <padding>
                                <Insets bottom="32" left="48" right="48" top="32" />
                            </padding>

                            <VBox spacing="8" styleClass="header-section">
                                <Label styleClass="page-title" text="My Saved Recipes" />
                                <Label styleClass="page-subtitle" text="Recipes you saved from AI or added manually" />
                            </VBox>

                            <!-- SAVED CARDS -->
                            <VBox fx:id="savedVBox" spacing="20" styleClass="recipes-container" />
                        </VBox>
                    </content>
                </ScrollPane>
            </content>
        </Tab>
    </tabs>
</TabPane>
