<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<!--
Main layout:
- BorderPane with top = header/search/filters
- center = ScrollPane -> FlowPane (cards)
-->

<BorderPane prefHeight="800.0" prefWidth="1280.0" stylesheets="@../../../pantry/pantry.css" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controllers.PantryController">

    <!-- === Header Section === -->
    <top>
        <VBox spacing="10" BorderPane.alignment="CENTER">

            <!-- Row 1: Title + header buttons -->
            <HBox alignment="CENTER_LEFT" spacing="12" styleClass="toolbar">
                <Label styleClass="title" text="Pantry Dashboard" />
                <Region HBox.hgrow="ALWAYS" />
                <!-- Style guide (icon) -->
                <Button fx:id="styleBtn" styleClass="icon" text="ðŸŽ¨" />
                <!-- Recipes -->
                <Button fx:id="recipesBtn" onAction="#recipesBtnOnAction" styleClass="pill" text="ðŸ‘¨â€ðŸ³ Recipes" />
                <!-- Shopping with badge graphic -->
                <Button fx:id="shoppingBtn" onAction="#goToShoppingList" styleClass="pill" text="ðŸ›’ Shopping">
                    <graphic>
                        <StackPane styleClass="badge-container">
                            <Label text=" " /> <!-- shim just to position badge -->
                            <Label styleClass="badge" text="4" />
                        </StackPane>
                    </graphic>
                </Button>
                <!-- Logout (icon) -->
                <Button fx:id="logoutBtn" styleClass="icon" text="ðŸšª" />
            </HBox>

            <!-- Row 2: Search + Add Item -->
            <HBox alignment="CENTER_LEFT" spacing="12" styleClass="toolbar">
                <!-- HBox.hgrow=ALWAYS makes search expand to fill available width -->
                <TextField fx:id="searchField" promptText="Search pantry itemsâ€¦" styleClass="search-field" HBox.hgrow="ALWAYS" />
                <Button fx:id="addItemBtn" onAction="#addItemBtnOnAction" styleClass="primary" text="+ Add Item" />
            </HBox>

            <!-- Row 3: Segmented Filters -->
            <HBox alignment="CENTER_LEFT" spacing="8" styleClass="segmented">
                <!-- Grouping is done in controller -->
                <ToggleButton fx:id="segAll" selected="true" text="All" />
                <ToggleButton fx:id="segExpiring" text="Expire Soon" />
                <ToggleButton fx:id="segLowStock" text="Low Stock" />
            </HBox>

        </VBox>
    </top>


    <!-- === Cards Grid (Scrollable) === -->
    <center>
        <ScrollPane fitToWidth="true" pannable="true" styleClass="viewport">
            <content>
                <!-- FlowPane wrapss cards responsively (3/2/1 columns based on width) -->
                <FlowPane fx:id="cardFlow" hgap="24" prefWrapLength="1100" vgap="24">
                    <padding>
                        <Insets bottom="16" left="16" right="16" top="16" />
                    </padding>
                    <!-- Cards are created dynamically by the controller -->
                </FlowPane>
            </content>
        </ScrollPane>
    </center>
</BorderPane>
