<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.geometry.Pos?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<!--
Main layout:
- BorderPane with top = header/search/filters
- center = ScrollPane -> FlowPane (cards)
-->
<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="rodolfo.pantrydashboard.PantryController"
            stylesheets="@pantry.css"
            prefWidth="1280.0" prefHeight="800.0">

    <!-- === Header Section === -->
    <top>
        <VBox spacing="10" BorderPane.alignment="CENTER">

            <!-- Row 1: Title + header buttons -->
            <HBox alignment="CENTER_LEFT" spacing="12" styleClass="toolbar">
                <Label text="Pantry Dashboard" styleClass="title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <!-- Style guide (icon) -->
                <Button text="ðŸŽ¨"  fx:id="styleBtn"   styleClass="icon"/>
                <!-- Recipes -->
                <Button text="ðŸ‘¨â€ðŸ³ Recipes" fx:id="recipesBtn" styleClass="pill"/>
                <!-- Shopping with badge graphic -->
                <Button text="ðŸ›’ Shopping" fx:id="shoppingBtn" styleClass="pill">
                    <graphic>
                        <StackPane styleClass="badge-container">
                            <Label text=" "/> <!-- shim just to position badge -->
                            <Label text="4" styleClass="badge"/>
                        </StackPane>
                    </graphic>
                </Button>
                <!-- Logout (icon) -->
                <Button text="ðŸšª" fx:id="logoutBtn" styleClass="icon"/>
            </HBox>

            <!-- Row 2: Search + Add Item -->
            <HBox alignment="CENTER_LEFT" spacing="12" styleClass="toolbar">
                <!-- HBox.hgrow=ALWAYS makes search expand to fill available width -->
                <TextField fx:id="searchField"
                           promptText="Search pantry itemsâ€¦"
                           styleClass="search-field"
                           HBox.hgrow="ALWAYS"/>
                <Button text="+ Add Item" fx:id="addItemBtn" styleClass="primary"/>
            </HBox>

            <!-- Row 3: Segmented Filters -->
            <HBox alignment="CENTER_LEFT" spacing="8" styleClass="segmented">
                <!-- Grouping is done in controller -->
                <ToggleButton text="All" fx:id="segAll" selected="true"/>
                <ToggleButton text="Expire Soon" fx:id="segExpiring"/>
                <ToggleButton text="Low Stock" fx:id="segLowStock"/>
            </HBox>

        </VBox>
    </top>


    <!-- === Cards Grid (Scrollable) === -->
    <center>
        <ScrollPane fitToWidth="true" pannable="true" styleClass="viewport">
            <content>
                <!-- FlowPane wrapss cards responsively (3/2/1 columns based on width) -->
                <FlowPane fx:id="cardFlow" hgap="24" vgap="24" prefWrapLength="1100">
                    <padding>
                        <Insets top="16" right="16" bottom="16" left="16"/>
                    </padding>
                    <!-- Cards are created dynamically by the controller -->
                </FlowPane>
            </content>
        </ScrollPane>
    </center>
</BorderPane>
